{% extends "base.html" %}
{% import "bootstrap/wtf.html" as wtf %}
<a href="class_s.html" id="" title="class_s">class_s</a>
{% block title %}Class_S{% endblock %}

{% block page_content %}
<div class="page-header">
	<h1> {{ user.username }} </h1>
	<h1> {{ user.codename }} </h1>
		
	{% if user.name or user.code %}
	<p>
		{% if user.username%}{{ user.username }}{% endif %}
		{% if user.usercode %}{{ user.codename }}{% endif %}
	</p>
	{% endif %}
	{% if current_user.is_administrator() %}
	<p><a href="mailto:{{ user.email }}">{{ user.email }}{% endif %}
 </a></p>
	<p> 
	</p>
</div>



<!-- pinging  -->
<!--div class : social -->
<div class="social">
	
	<iframe id = "social" type="text/html" width="70" height="600" style="border:none" src = "http://127.0.0.1:5000/lecture/social" scrolling = no align = "left">
	</iframe>	
</div>
	
	

<!--video -->
<div class="page-body">
	<iframe id="myPlayer" type="text/html" width="1024" height="576"
	  src="https://www.youtube.com/embed/KmDYXaaT9sA" frameborder="0" align="right">
	  </iframe>		  



<!--api -->
		  
	<script>
	// 2. This code loads the IFrame Player API code asynchronously.
	var tag = document.createElement('script');
	tag.src = "https://www.youtube.com/iframe_api";
	var firstScriptTag = document.getElementsByTagName('script')[0];
	firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);



	// 3. This function creates an <iframe> (and YouTube player)
	        //    after the API code downloads.
	var player;	
    function onYouTubeIframeAPIReady() {
		player = new YT.Player("myPlayer", {
			events: {
				// 'onReady': onPlayerReady(),
				'onStateChange': onPlayerStateChange(),
			}
		});
	}
	
	// var playerReady = false;
	// function onPlayerReady(event) {
	// 	playerReady = true;
	// }
	

	// // 4. The API will call this function when the video player is ready.
// 		function onPlayerReady(event) {
// 		  var embedCode = event.target.getVideoEmbedCode();
// 		  event.target.playVideo();
// 		  if (document.getElementById('embed-code')) {
// 		    document.getElementById('embed-code').innerHTML = embedCode;
// 		  }
// 		}
//
	// record event
	var done = false;
	function onPlayerStateChange(event) {
		switch (event.data) {
			case YT.PlayerState.UNSTARTED:							
				console.log('unstarted');
				break;
			case YT.PlayerState.ENDED:
				console.log('ended');
				alert ("Please move to the next page!")
				break;
			case YT.PlayerState.PLAYING:
				console.log('playing');
				break;
			case YT.PlayerState.PAUSED:
				console.log('paused');
				break;
			case YT.PlayerState.BUFFERING:
				console.log('buffering : ');
				break;
			case YT.PlayerState.CUED:
				console.log('video cued : ');
				break;
			default:
				break;
		}
	}
	
	
	
	//finish -> move to next phase
	var done = false;
	function nextPhase(){
		if (event.data === 0) {
			alert('Please move to next page!');
			console.log("Video has ended.")
		}
	}

	
	onPlayerStateChange();
	nextPhase();
	// submit 
	</script>				   
</div>
{% endblock %}


